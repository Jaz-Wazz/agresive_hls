<html>
	<head>
		<link rel="stylesheet" href="main.css">
		<script src="hls.min.js"></script>
	</head>
	<body>
		<video id="player" controls="controls"></video>
	</body>
	<script>
		function loader()
		{
			this.load = function(context, config, callbacks)
			{
				let url = new URL(context.url);
				let filename = url.pathname.split('/').pop();
				let index = parseInt(filename.match(/\d+/)[0]);

				let xhr = new XMLHttpRequest();
				xhr.open("GET", url, true);
				xhr.send();
				xhr.responseType = "arraybuffer";

				xhr.onload = function()
				{
					console.log("Loaded.");
					callbacks.onSuccess({data: xhr.response}, {}, context);
				};
			}
		}

		let hls = new Hls({fLoader: loader});
		hls.loadSource('http://ia801400.s3dns.us.archive.org/0366d7f8/index-dvr.m3u8');
		hls.attachMedia(player);
	</script>
</html>
